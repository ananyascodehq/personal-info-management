{% extends 'base.html' %}
{% block content %}

<!-- ðŸ‘¤ Profile Header -->
<div class="panel mb-4">
  <div class="d-flex justify-content-between align-items-start">
    <div>
      <h1 class="page-title">{{ person.name }}</h1>
      <p class="page-subtitle">
        {{ person.email }} Â· {{ person.phone }}
      </p>
      {% if person.dob %}
        <p class="text-muted mb-0">DOB: {{ person.dob }}</p>
      {% endif %}
      <p class="text-muted mb-0">Gender: {{ person.gender }}</p>
    </div>

    <a href="{{ url_for('update_person', id=person.person_id) }}"
       class="btn btn-outline-primary">
      Edit Profile
    </a>
  </div>
</div>

<!-- ðŸ“‘ Tabs -->
<ul class="nav nav-tabs mb-3">
  <li class="nav-item">
    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#career">
      Career
    </button>
  </li>
  <li class="nav-item">
    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#education">
      Education
    </button>
  </li>
</ul>

<div class="tab-content">

  <!-- ðŸ’¼ Career Tab -->
  <div class="tab-pane fade show active" id="career">
    <div class="d-flex justify-content-between mb-3">
      <h5>Career Records</h5>
      <a href="{{ url_for('add_career') }}" class="btn btn-sm btn-primary">
        + Add Career
      </a>
    </div>

    {% if careers|length == 0 %}
      <div class="empty-state">
        <p>No career records yet.</p>
      </div>
    {% else %}
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Job Title</th>
              <th>Company</th>
              <th>Experience</th>
              <th>Skills</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for c in careers %}
            <tr>
              <td>{{ c.job_title }}</td>
              <td>{{ c.company }}</td>
              <td>{{ c.years_experience }}</td>
              <td>{{ c.skills }}</td>
              <td>
                <a href="{{ url_for('edit_career', id=c.career_id) }}"
                   class="btn btn-sm edit-btn me-1">Edit</a>
                <a href="{{ url_for('delete_career', id=c.career_id) }}"
                   class="btn btn-sm delete-btn">Delete</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>

  <!-- ðŸŽ“ Education Tab -->
  <div class="tab-pane fade" id="education">
    <div class="d-flex justify-content-between mb-3">
      <h5>Education Records</h5>
      <a href="{{ url_for('add_education') }}" class="btn btn-sm btn-primary">
        + Add Education
      </a>
    </div>

    {% if education|length == 0 %}
      <div class="empty-state">
        <p>No education records yet.</p>
      </div>
    {% else %}
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Degree</th>
              <th>Institution</th>
              <th>Year</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for e in education %}
            <tr>
              <td>{{ e.degree }}</td>
              <td>{{ e.institution }}</td>
              <td>{{ e.year_of_passing }}</td>
              <td>
                <a href="{{ url_for('edit_education', id=e.edu_id) }}"
                   class="btn btn-sm edit-btn me-1">Edit</a>
                <a href="{{ url_for('delete_education', id=e.edu_id) }}"
                   class="btn btn-sm delete-btn">Delete</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>

</div>

{% endblock %}
